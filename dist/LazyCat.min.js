/*! Lazycat.js v0.3.0 | (c) 2017 Chan Young Park | MIT License */
(function(){"use strict";var e={};e.image=function(e,t,a){var o=document.querySelectorAll(e);for(var i=0;i<o.length;i++){(function(e){var i=new Image;i.src=o[e].getAttribute("data-lazycat-image");i.onload=function(){if(o[e].tagName.toLowerCase()==="img"){o[e].setAttribute("src",i.src)}else{o[e].style.backgroundImage='url("'+i.src+'")'}if(t)t.call(o[e])};i.onerror=function(){if(a)a.call(o[e])}})(i)}};e.video=function(e,t,a){var o=document.querySelector(e);var i=o.getAttribute("data-lazycat-video");o.src=i;o.removeAttribute("data-lazycat-video");setTimeout(function(){o.load()},0);var c=function(){o.setAttribute("data-lazycat-loaded","");if(t)t.call(o)};o.addEventListener("canplay",function(){if(!o.hasAttribute("data-lazycat-loaded")){c()}});if(!o.hasAttribute("data-lazycat-loaded")){if(o.readyState>2){c()}else{if(a){setTimeout(function(){if(!o.hasAttribute("data-lazycat-loaded"))c()},a)}}}};e.videoBlob=function(e,t,a){var o=document.querySelector(e);var i=o.getAttribute("data-lazycat-video");var c=new XMLHttpRequest;if(o.canPlayType('video/mp4;codecs="avc1.42E01E, mp4a.40.2"')){c.open("GET",i)}c.responseType="blob";c.send();c.onload=function(){o.src=URL.createObjectURL(c.response);if(t)t.call(o)};c.onerror=function(){if(a)a.call(o)}};if(typeof define==="function"&&define.amd)define(e);else if(typeof module==="object"&&module.exports)module.exports=e;else this.LazyCat=e}).call(this);
